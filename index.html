<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Story of Us</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>

    <style>
        :root {
            --bg-color: #0f050a;
            --primary-pink: #ff4d6d;
            --soft-gold: #ffd700;
            --font-main: 'Montserrat', sans-serif;
            --font-title: 'Cinzel', serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }

        body {
            background-color: var(--bg-color);
            color: white;
            font-family: var(--font-main);
            overflow-x: hidden;
            overflow-y: hidden; /* Locked until start */
        }

        /* --- NEW: HEARTBEAT VIGNETTE --- */
        /* A subtle red pulse around the edges of the screen */
        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 60%, rgba(255, 77, 109, 0.1) 100%);
            pointer-events: none; z-index: 100;
            animation: heartbeatOverlay 4s infinite ease-in-out;
        }
        @keyframes heartbeatOverlay {
            0%, 100% { box-shadow: inset 0 0 50px rgba(0,0,0,0); }
            50% { box-shadow: inset 0 0 100px rgba(255, 77, 109, 0.3); }
        }

        /* CURSOR */
        .cursor-dot, .cursor-outline {
            position: fixed; top: 0; left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
        }
        .cursor-dot { width: 8px; height: 8px; background-color: var(--primary-pink); box-shadow: 0 0 15px var(--primary-pink); }
        .cursor-outline { width: 40px; height: 40px; border: 1px solid rgba(255, 255, 255, 0.5); transition: 0.1s; }

        /* SECTIONS */
        section {
            min-height: 100vh;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            opacity: 0; 
            position: relative; z-index: 2;
        }

        .hero-title {
            font-family: 'Great Vibes', cursive;
            font-size: 5rem; color: var(--primary-pink);
            text-shadow: 0 0 20px rgba(255, 77, 109, 0.5);
            text-align: center;
            min-height: 120px; /* Prevent layout shift during typing */
        }
        
        /* NEXT BUTTON GLOW */
        .next-btn {
            margin-top: 50px;
            padding: 20px 50px;
            background: rgba(255,215,0,0.05);
            color: var(--soft-gold);
            border: 1px solid var(--soft-gold);
            font-family: var(--font-title);
            font-size: 1.2rem;
            text-decoration: none;
            transition: 0.5s;
            cursor: none;
            position: relative;
            overflow: hidden;
            letter-spacing: 3px;
        }
        .next-btn:hover {
            background: var(--soft-gold); color: black; 
            box-shadow: 0 0 50px var(--soft-gold);
        }

        /* --- NEW: FALLING PETALS --- */
        .petal {
            position: fixed;
            background: #ff4d6d;
            border-radius: 100% 0 100% 0;
            opacity: 0.7;
            z-index: 1;
            pointer-events: none;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { transform: translate(0, -10vh) rotate(0deg); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translate(-10vw, 110vh) rotate(360deg); opacity: 0; }
        }

        /* CANVAS */
        #stars-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-beautiful-dream-493.mp3" type="audio/mp3">
    </audio>

    <div class="vignette"></div> <canvas id="stars-canvas"></canvas>
    <div id="petals-container"></div> <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <div id="start-screen" style="position:fixed; inset:0; background:#000; z-index:1000; display:flex; justify-content:center; align-items:center; flex-direction:column; transition: opacity 1.5s;">
        <h2 style="font-family: 'Cinzel'; color:white; margin-bottom: 20px; letter-spacing: 5px;">A STORY FOR YOU</h2>
        <button class="next-btn" id="start-btn">Unlock</button>
    </div>

    <section id="hero">
        <div class="hero-title"><span id="typed-text"></span></div>
        <p style="margin-top:20px; font-size:1.2rem; color:#ccc; opacity: 0.7; animation: fadeUpDown 2s infinite;">(Scroll down slowly...)</p>
    </section>

    <section id="part1">
        <div class="hero-title" style="font-size: 3.5rem; color:white;">From the moment we met...</div>
        <p style="max-width:600px; text-align:center; margin-top:30px; line-height:1.8; font-size: 1.2rem; color: #e0aaff;">
            Colors became brighter.<br>Laughter became louder.<br>Life became magical.
        </p>
    </section>

    <section id="part2">
        <div class="hero-title" style="font-size: 3rem; color:white; margin-bottom: 30px;">I don't need a special day.</div>
        <p style="margin-bottom: 50px; font-size: 1.5rem;">But I want to show you my world.</p>
        
        <a href="memories.html" class="next-btn">Enter Our Universe â†’</a>
    </section>

    <script>
        /* --- 1. CURSOR LOGIC --- */
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        window.addEventListener('mousemove', (e) => {
            cursorDot.style.left = `${e.clientX}px`; 
            cursorDot.style.top = `${e.clientY}px`;
            cursorOutline.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 400, fill: "forwards" });
        });

        /* --- 2. GSAP & START SEQUENCE --- */
        gsap.registerPlugin(ScrollTrigger);
        
        document.getElementById('start-btn').addEventListener('click', () => {
            document.getElementById('bg-music').play().catch(e => console.log("Audio needed user interaction"));
            
            // Fade out start screen
            const startScreen = document.getElementById('start-screen');
            startScreen.style.opacity = '0';
            setTimeout(() => {
                startScreen.style.display = 'none';
                document.body.style.overflowY = 'auto'; // Unlock scroll
                initScroll();
                
                // TRIGGER TYPEWRITER EFFECT AFTER UNLOCK
                new Typed('#typed-text', {
                    strings: ["Hey My Love...", "It's been a while...", "I made this for you..."],
                    typeSpeed: 50,
                    backSpeed: 30,
                    startDelay: 500,
                    showCursor: true,
                    loop: false
                });

            }, 1500);
        });

        function initScroll() {
            gsap.to('#hero', { opacity: 1, duration: 2 });
            gsap.to('#part1', { scrollTrigger: { trigger: '#part1', start: 'top 60%' }, opacity: 1, duration: 2, y: -20 });
            gsap.to('#part2', { scrollTrigger: { trigger: '#part2', start: 'top 60%' }, opacity: 1, duration: 2, y: -20 });
        }

        /* --- 3. ROSE PETALS GENERATOR (NEW) --- */
        function createPetal() {
            const petal = document.createElement('div');
            petal.classList.add('petal');
            
            // Randomize size and position
            const size = Math.random() * 15 + 10; // 10px to 25px
            petal.style.width = `${size}px`;
            petal.style.height = `${size}px`;
            petal.style.left = Math.random() * 100 + 'vw';
            
            // Randomize animation duration
            const duration = Math.random() * 5 + 5; // 5s to 10s
            petal.style.animationDuration = `${duration}s`;
            
            // Randomize Blur for depth
            const blur = Math.random() * 2;
            petal.style.filter = `blur(${blur}px)`;

            document.getElementById('petals-container').appendChild(petal);

            // Remove after animation
            setTimeout(() => { petal.remove(); }, duration * 1000);
        }
        setInterval(createPetal, 300); // Create a new petal every 300ms

        /* --- 4. STARS BACKGROUND --- */
        const canvas = document.getElementById('stars-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        
        const stars = Array(150).fill().map(() => ({
            x: Math.random() * canvas.width, y: Math.random() * canvas.height,
            size: Math.random() * 1.5, speed: Math.random() * 0.2
        }));

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear instead of fill for transparent petal overlay
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            stars.forEach(s => {
                s.y -= s.speed;
                if(s.y < 0) s.y = canvas.height;
                ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI*2); ctx.fill();
            });
            requestAnimationFrame(animate);
        }
        animate();
        
        window.addEventListener('resize', () => {
             canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>